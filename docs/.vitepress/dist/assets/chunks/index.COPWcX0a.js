import{ah as f,al as x}from"./index.hdnQtmva.js";import{ai as k,D as A,p as g,q as E,ag as C,k as v,P as _}from"./framework.BUSYeSjH.js";function D(u,{disabled:n,beforeFocus:e,afterFocus:r,beforeBlur:i,afterBlur:c}={}){const m=k(),{emit:o}=m,a=A(),l=g(!1),d=t=>{const s=C(e)?e(t):!1;v(n)||l.value||s||(l.value=!0,o("focus",t),r==null||r())},h=t=>{var s;const p=C(i)?i(t):!1;v(n)||t.relatedTarget&&((s=a.value)!=null&&s.contains(t.relatedTarget))||p||(l.value=!1,o("blur",t),c==null||c())},F=t=>{var s,p;v(n)||x(t.target)||(s=a.value)!=null&&s.contains(document.activeElement)&&a.value!==document.activeElement||(p=u.value)==null||p.focus()};return E([a,()=>v(n)],([t,s])=>{t&&(s?t.removeAttribute("tabindex"):t.setAttribute("tabindex","-1"))}),f(a,"focus",d,!0),f(a,"blur",h,!0),f(a,"click",F,!0),{isFocused:l,wrapperRef:a,handleFocus:d,handleBlur:h}}const b=u=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(u);function R({afterComposition:u,emit:n}){const e=g(!1),r=o=>{n==null||n("compositionstart",o),e.value=!0},i=o=>{var a;n==null||n("compositionupdate",o);const l=(a=o.target)==null?void 0:a.value,d=l[l.length-1]||"";e.value=!b(d)},c=o=>{n==null||n("compositionend",o),e.value&&(e.value=!1,_(()=>u(o)))};return{isComposing:e,handleComposition:o=>{o.type==="compositionend"?c(o):i(o)},handleCompositionStart:r,handleCompositionUpdate:i,handleCompositionEnd:c}}export{D as a,R as u};
