import{aa as p,ac as F}from"./index.BSMhXNCI.js";import{ak as b,D as k,p as g,q as w,aq as C,k as f,P as A}from"./framework.CKJLQNY5.js";function q(u,t,s,i){for(var c=u.length,a=s+(i?1:-1);i?a--:++a<c;)if(t(u[a],a,u))return a;return-1}function D(u,{disabled:t,beforeFocus:s,afterFocus:i,beforeBlur:c,afterBlur:a}={}){const m=b(),{emit:n}=m,e=k(),r=g(!1),d=o=>{const l=C(s)?s(o):!1;f(t)||r.value||l||(r.value=!0,n("focus",o),i==null||i())},h=o=>{var l;const v=C(c)?c(o):!1;f(t)||o.relatedTarget&&((l=e.value)!=null&&l.contains(o.relatedTarget))||v||(r.value=!1,n("blur",o),a==null||a())},x=o=>{var l,v;f(t)||F(o.target)||(l=e.value)!=null&&l.contains(document.activeElement)&&e.value!==document.activeElement||(v=u.value)==null||v.focus()};return w([e,()=>f(t)],([o,l])=>{o&&(l?o.removeAttribute("tabindex"):o.setAttribute("tabindex","-1"))}),p(e,"focus",d,!0),p(e,"blur",h,!0),p(e,"click",x,!0),{isFocused:r,wrapperRef:e,handleFocus:d,handleBlur:h}}const E=u=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(u);function I({afterComposition:u,emit:t}){const s=g(!1),i=n=>{t==null||t("compositionstart",n),s.value=!0},c=n=>{var e;t==null||t("compositionupdate",n);const r=(e=n.target)==null?void 0:e.value,d=r[r.length-1]||"";s.value=!E(d)},a=n=>{t==null||t("compositionend",n),s.value&&(s.value=!1,A(()=>u(n)))};return{isComposing:s,handleComposition:n=>{n.type==="compositionend"?a(n):c(n)},handleCompositionStart:i,handleCompositionUpdate:c,handleCompositionEnd:a}}export{D as a,q as b,I as u};
